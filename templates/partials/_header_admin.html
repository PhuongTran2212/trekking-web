{% load static %}

<!-- LIÊN KẾT ĐẾN FILE CSS DÀNH RIÊNG CHO HEADER -->
<link rel="stylesheet" href="{% static 'css/header_admin.css' %}">

<header class="header">
    <!-- === PHẦN BÊN TRÁI: NÚT TOGGLE MOBILE & THANH TÌM KIẾM === -->
    <div class="header-left">
        <!-- Nút này chỉ hiện trên mobile -->
        <button class="btn btn-light d-lg-none" id="sidebar-toggle-mobile">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-list" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"/></svg>
        </button>

        <!-- Thanh tìm kiếm -->
        <div class="admin-search">
            <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z" />
            </svg>
            <input type="text" class="search-input" placeholder="Tìm kiếm users, chuyến đi, báo cáo...">
        </div>
    </div>

    <!-- === PHẦN BÊN PHẢI: USER MENU === -->
    <div class="header-right">
        <div class="profile-menu">
            <button class="profile-btn" id="profile-btn">
                <img src="{% if user.taikhoanhoso.anh_dai_dien %}{{ user.taikhoanhoso.anh_dai_dien.url }}{% else %}{% static 'images/default_avatar.png' %}{% endif %}" alt="Avatar của {{ user.username }}">
            </button>
            
            <div class="dropdown-menu" id="profile-dropdown">
                <div class="dropdown-header">
                    <div style="font-weight: 600;">{{ user.get_full_name|default:user.username }}</div>
                    <div style="font-size: 0.875rem; color: var(--gray-500);">@{{ user.username }}</div>
                </div>
                <div class="dropdown-divider"></div>
                <form action="{% url 'accounts:dang-xuat' %}" method="post" style="margin: 0;">
                    {% csrf_token %}
                    <button type="submit" style="background: none; border: none; padding: 0; width: 100%; cursor: pointer; text-align: left;">
                         <span class="dropdown-item danger">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" style="width: 18px; height: 18px;"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9" /></svg>
                            Đăng xuất
                        </span>
                    </button>
                </form>
            </div>
        </div>
    </div>
</header>